<section
    id="panel"
    role="region"
    aria-labelledby="panel-heading"
>
    <div
        class="blur-overlay"
        aria-hidden="true"
    ></div>
    <section class="container">
        <h2
            id="panel-heading"
            class="sr-only"
        >
            {{ panelType() === 'classes' ? ('classes.sr-only.heading' |translate) :
            ('meals.sr-only.heading' |translate) }}
        </h2>

        <section
            class="nav-tabs"
            role="tablist"
            aria-label="{{ panelType() === 'classes' ? ('classes.sr-only.section' |translate) : ('meals.sr-only.section' |translate) }}"
        >
            @if (panelType() === 'classes' && difficultyLevels()) {
            <app-nav-tabs
                [navItems]="difficultyLevels()"
                (navItemClick)="getExercises($event)"
                role="presentation"
            />
            } @else if (panelType() === 'meals' && mealsCategories()) {
            <app-nav-tabs
                [navItems]="mealsCategories()"
                (navItemClick)="getMeals($event)"
                role="presentation"
            />
            }
        </section>

        <ul
            class="list list-none p-0 pt-1 m-0"
            role="list"
            aria-label="{{ panelType() === 'classes' ? ('classes.sr-only.ul' |translate) : ('meals.sr-only.ul' |translate) }}"
        >
            @if (panelType() === 'classes') { @for (item of exercesList(); track $index; let isLast
            = $last) {
            <li
                [class.border-none]="$index === exercesList()!.length - 1"
                class="item flex align-items-center"
                (click)="selectExercise(item)"
                (keydown)="selectExercise(item)"
                role="listitem"
                tabindex="0"
                aria-label="{{ item.exercise }}, {{ item.primary_equipment }}"
            >
                <div
                    class="image"
                    aria-hidden="true"
                >
                    <img
                        ngSrc="./images/details/exercise.avif"
                        width="500"
                        height="750"
                        alt="{{ item.exercise }}"
                        role="presentation"
                    />
                </div>
                <div class="content flex align-items-center">
                    <div class="text">
                        <h3 class="ul-heading">
                            {{ item.exercise.split(' ').splice(0,4).join(' ') }}
                        </h3>
                        <p class="ul-paragraph">{{ item.grip }}</p>
                        <p class="ul-paragraph">{{ item.posture }}</p>
                    </div>
                    <div class="icon-wrapper">
                        <div
                            class="icon"
                            aria-hidden="true"
                        >
                            <i
                                class="pi pi-caret-right"
                                style="color: var(--panel-text-color)"
                            ></i>
                        </div>
                        <span class="sr-only"
                            >{{ ('classes.sr-only.view' |translate) + ' ' + item.exercise }}</span
                        >
                    </div>
                </div>
            </li>
            } @empty {
            <li
                class="no-items"
                role="listitem"
            >
                <p class="empty">{{'classes.empty' |translate}}</p>
            </li>
            } }@else if (panelType() === 'meals') { @for (item of mealsList(); track $index; let
            isLast = $last) {
            <li
                [class.border-none]="$index === mealsList()!.length - 1"
                class="item flex align-items-center"
                (click)="selectMeal(item)"
                (keydown)="selectMeal(item)"
                role="listitem"
                tabindex="0"
                aria-label="{{ item.strMeal }}"
            >
                <div
                    class="image"
                    aria-hidden="true"
                >
                    <img
                        [src]="item.strMealThumb"
                        alt="{{ item.strMeal }}"
                        role="presentation"
                    />
                </div>
                <div class="content flex align-items-center">
                    <div class="text">
                        <h3 class="m-0">{{ item.strMeal }}</h3>
                        <p>{{ item.strMeal }}</p>
                    </div>
                    <div class="icon-wrapper">
                        <div
                            class="icon"
                            aria-hidden="true"
                        >
                            <i
                                class="pi pi-caret-right"
                                style="color: var(--panel-text-color)"
                            ></i>
                        </div>
                        <span class="sr-only"
                            >{{ ('meals.sr-only.view' |translate) + ' ' + item.strMeal }}</span
                        >
                    </div>
                </div>
            </li>
            } @empty {
            <li
                class="no-items"
                role="listitem"
            >
                <p class="empty">{{'meals.empty' |translate}}</p>
            </li>
            } }
        </ul>
    </section>
</section>

<!-- Status messages for screen readers -->
<!-- <div
            aria-live="polite"
            aria-atomic="true"
            class="sr-only"
        >
            @if (panelType() === 'classes') { {{ exercesList()?.length || 0 }} exercises loaded }
            @else if (panelType() === 'meals') { {{ mealsList()?.length || 0 }} meals loaded }
        </div> -->
